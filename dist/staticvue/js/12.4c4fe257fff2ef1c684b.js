webpackJsonp([12],{LIPt:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("P9l9"),s={data:function(){return{plang:this.$parent.plang,asideWith:199,soab_domain_options:"",soab_domain_cid:"",soab_cid:"",oab_departs:[],default_expanded_keys:[0],default_checked_keys:[0],oab_defaultProps:{children:"children",label:"label"},filters:{search:""},total:0,page:1,page_size:10,listLoading:!1,sels:[],listTables:[],department_name:""}},created:function(){var e=this;this.$parent.activeIndex="soab";var t=1;sessionStorage.soab_domain_cid&&"null"!=sessionStorage.soab_domain_cid?(t=sessionStorage.soab_domain_cid,this.soab_domain_cid=Number(t),this.soab_cid=0,window.sessionStorage.soab_cid=0,this.getSoabGroups(),this.getSoabMembers()):Object(i._36)().then(function(a){sessionStorage.soab_domain_cid=a.data.soab_domain_cid,t=a.data.soab_domain_cid,e.soab_domain_cid=Number(t),e.soab_cid=0,window.sessionStorage.soab_cid=0,e.getSoabGroups(),e.getSoabMembers()}),this.soab_cid=window.sessionStorage.soab_cid,this.getSoabDomains()},mounted:function(){},methods:{toggleWidth:function(){199==this.asideWith?this.asideWith=399:399==this.asideWith&&(this.asideWith=199)},soabChangeDomain:function(e){this.soab_domain_cid=e,this.soab_cid=0,window.sessionStorage.soab_domain_cid=Number(e),window.sessionStorage.soab_cid=0,this.getSoabGroups(),this.getSoabMembers()},setCurrentKey:function(){var e=this;this.$nextTick(function(){e.$refs.treeForm.setCurrentKey(Number(e.soab_cid));var t=e.$refs.treeForm.getCurrentNode();e.department_name=t.label})},getSoabDomains:function(){var e=this;Object(i._0)().then(function(t){var a=t.data.results;a.length>=1&&(e.soab_domain_options=a)})},getSoabGroups:function(){var e=this;Object(i._1)(this.soab_domain_cid).then(function(t){e.oab_departs=t.data.results,e.setCurrentKey()})},searchSoabMembers:function(){var e=this,t=new Array;this.page=1,t.push(Number(this.soab_cid)),this.default_expanded_keys=t,this.default_checked_keys=t;var a={page:this.page,page_size:this.page_size,search:this.filters.search,dept_id:this.soab_cid,domain_id:this.soab_domain_cid};this.listLoading=!0,Object(i._2)(a).then(function(t){e.total=t.data.count,e.listTables=t.data.results,e.listLoading=!1}).catch(function(){e.listLoading=!1})},getSoabMembers:function(){var e=this,t=new Array;t.push(Number(this.soab_cid)),this.default_expanded_keys=t,this.default_checked_keys=t;var a={page:this.page,page_size:this.page_size,search:this.filters.search,dept_id:this.soab_cid,domain_id:this.soab_domain_cid};this.listLoading=!0,Object(i._2)(a).then(function(t){e.total=t.data.count,e.listTables=t.data.results,e.listLoading=!1}).catch(function(){e.listLoading=!1})},f_TreeNodeClick:function(e){this.page=1,this.soab_cid=e.id,this.department_name=e.label,window.sessionStorage.soab_cid=e.id,this.getSoabMembers()},f_TableSizeChange:function(e){this.page_size=e,this.getSoabMembers()},f_TableCurrentChange:function(e){this.page=e,this.getSoabMembers()},f_TableSelsChange:function(e){this.sels=e},Oab_send_to_department:function(){var e=this;this.$confirm(this.plang.CONTACT_OAB_MSG3,this.plang.COMMON_BUTTON_CONFIRM_NOTICE,{type:"warning"}).then(function(){var t="";e.soab_domain_options.forEach(function(a){a.id==e.soab_domain_cid&&(t=a.label)});var a=["dept_"+e.soab_cid+"@"+t,e.department_name];0==e.soab_cid&&(a=["everyone@"+t,"everyone"]),e.$parent.sendMail_net([a])}).catch(function(){})},Oab_to_pab:function(){var e=this,t=this,a=this.sels.map(function(e){return e.id});this.$confirm(this.plang.CONTACT_OAB_MSG4,this.plang.COMMON_BUTTON_CONFIRM_NOTICE,{type:"warning"}).then(function(){e.listLoading=!0;var s={ids:a,domain_id:e.soab_domain_cid};Object(i.Y)(s).then(function(a){e.listLoading=!1,t.$message({message:e.plang.CONTACT_OAB_MSG5,type:"success"})}).catch(function(t){e.listLoading=!1})}).catch(function(t){e.listLoading=!1})}},computed:{}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"m-mail absolute_height"},[a("aside",{staticClass:"mlsidebar",style:{width:e.$parent.asideWith+"px"}},[a("div",{staticClass:"mlsidebar-bg"}),e._v(" "),a("div",{staticClass:"wrapper u-scroll top0"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.soab_domain_cid,expression:"soab_domain_cid"}],attrs:{type:"hidden"},domProps:{value:e.soab_domain_cid},on:{input:function(t){t.target.composing||(e.soab_domain_cid=t.target.value)}}}),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.soab_cid,expression:"soab_cid"}],attrs:{type:"hidden"},domProps:{value:e.soab_cid},on:{input:function(t){t.target.composing||(e.soab_cid=t.target.value)}}}),e._v(" "),a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:e.plang.SETTING_RE_ADD_PLACEHODER},on:{change:e.soabChangeDomain},model:{value:e.soab_domain_cid,callback:function(t){e.soab_domain_cid=t},expression:"soab_domain_cid"}},e._l(e.soab_domain_options,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}),1),e._v(" "),a("el-tree",{ref:"treeForm",staticClass:"filter-tree",attrs:{data:e.oab_departs,props:e.oab_defaultProps,"render-after-expand":!0,"highlight-current":!0,"node-key":"id",indent:13,"default-expanded-keys":e.default_expanded_keys,"default-checked-keys":e.default_checked_keys},on:{"node-click":e.f_TreeNodeClick}})],1),e._v(" "),a("div",{staticClass:"navbar-expand contact_sidebar",on:{click:e.$parent.toggleWidth}},[199==e.$parent.asideWith?a("i",{staticClass:"el-icon-arrow-right"}):e._e(),e._v(" "),399==e.$parent.asideWith?a("i",{staticClass:"el-icon-arrow-left"}):e._e()])]),e._v(" "),a("article",{staticClass:"mlmain mltabview overflow_auto",style:{left:e.$parent.asideWith+1+"px"}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticClass:"j-module-content j-maillist mllist-list height100 "},[a("el-row",[a("el-col",{staticClass:"breadcrumb-container",attrs:{span:24}},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/welcome"}}},[e._v(e._s(e.plang.COMMON_HOME_NAME))]),e._v(" "),a("el-breadcrumb-item",[a("a",{attrs:{href:"#"}},[e._v(e._s(e.plang.CONTANCT_INDEX_SOAB))])]),e._v(" "),a("el-breadcrumb-item",[e._v(e._s(e.plang.CONTACT_OAB_CUR)+"Â "+e._s(e.department_name))])],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[a("el-form",{attrs:{inline:!0,model:e.filters}},[a("el-form-item",[a("el-input",{attrs:{placeholder:e.plang.CONTACT_PAB_SEARCH,size:"small"},model:{value:e.filters.search,callback:function(t){e.$set(e.filters,"search",t)},expression:"filters.search"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.searchSoabMembers}},[e._v(e._s(e.plang.COMMON_SEARCH))])],1)],1)],1)],1),e._v(" "),a("section",{staticClass:"content content-list height100"},[a("el-row",{staticClass:"toolbar"},[a("el-col",{attrs:{span:12}},[a("el-button",{attrs:{type:"primary",disabled:0===this.sels.length,size:"mini"},on:{click:function(t){return e.$parent.sendMail_net("more",e.sels)}}},[e._v(" "+e._s(e.plang.CONTACT_OAB_SEND))]),e._v(" "),a("el-button",{attrs:{type:"success",size:"mini"},on:{click:e.Oab_send_to_department}},[e._v(e._s(e.plang.CONTACT_OAB_SENDO))]),e._v(" "),a("el-button",{attrs:{type:"info",disabled:0===this.sels.length,size:"mini"},on:{click:e.Oab_to_pab}},[e._v(" "+e._s(e.plang.CONTACT_OAB_TOPAB))])],1),e._v(" "),e.total>0?a("el-col",{staticStyle:{"text-align":"right","line-height":"28px"},attrs:{span:12}},[e.total>0?a("el-pagination",{staticStyle:{display:"inline-block"},attrs:{layout:"total, sizes, prev","page-sizes":[10,20,50,100],"current-page":e.page,"page-size":e.page_size,total:e.total},on:{"size-change":e.f_TableSizeChange,"current-change":e.f_TableCurrentChange}}):e._e(),e._v(" "),a("span",[e._v(e._s(this.page+" / "+Math.ceil(this.total/this.page_size)))]),e._v(" "),e.total>0?a("el-pagination",{staticStyle:{display:"inline-block"},attrs:{layout:"next, jumper","page-sizes":[10,20,50,100],"current-page":e.page,"page-size":e.page_size,total:e.total},on:{"size-change":e.f_TableSizeChange,"current-change":e.f_TableCurrentChange}}):e._e()],1):e._e()],1),e._v(" "),a("el-table",{staticStyle:{width:"100%","max-width":"100%"},attrs:{data:e.listTables,"highlight-current-row":"",width:"100%",size:"mini",border:""},on:{"selection-change":e.f_TableSelsChange}},[a("el-table-column",{attrs:{type:"selection",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{type:"index",label:"No.",width:"60"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:e.plang.COMMON_XINGMING,width:"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"username",label:e.plang.COMMON_EMAIL,width:"250"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mobile",label:e.plang.COMMON_MOBILE2,width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"tel_work",label:e.plang.CONTACT_OAB_WORKTEL,width:"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"department",label:e.plang.COMMON_DEPARTMENT}}),e._v(" "),a("el-table-column",{attrs:{prop:"position",label:e.plang.COMMON_POSITION,width:"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"tel_group",label:e.plang.COMMON_TELGROUP,width:"150"}})],1),e._v(" "),a("el-col",{staticClass:"toolbar",attrs:{span:24}})],1)],1)])])},staticRenderFns:[]};var o=a("C7Lr")(s,n,!1,function(e){a("XFHw")},"data-v-e76dabda",null);t.default=o.exports},XFHw:function(e,t){}});