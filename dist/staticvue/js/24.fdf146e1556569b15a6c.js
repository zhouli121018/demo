webpackJsonp([24],{GkPB:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("dsPG"),n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"j-module-content j-maillist mllist-list height100 "},[a("el-row",{staticStyle:{padding:"0px"}},[a("el-col",{staticClass:"breadcrumb-container",attrs:{span:24}},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/welcome"}}},[t._v(t._s(this.$parent.lan.COMMON_HOME_NAME))]),t._v(" "),a("el-breadcrumb-item",[a("a",{attrs:{href:"#"}},[t._v(t._s(this.$parent.lan.SETTING_INDEX_NAME))])]),t._v(" "),a("el-breadcrumb-item",[t._v(t._s(this.$parent.lan.COMMON_SIGNATURA))])],1)],1)],1),t._v(" "),a("section",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticClass:"content content-list height100",staticStyle:{background:"rgba(255,255,255,0.9)","padding-bottom":"13px"}},[a("el-row",{staticClass:"toolbar"},[a("el-col",{attrs:{span:12}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.createFormShow}},[t._v(t._s(this.$parent.lan.SETTING_SIG_BUTTON_ADD))]),t._v(" "),a("el-button",{attrs:{type:"success",size:"mini"},on:{click:t.setDefaultSig}},[t._v(t._s(this.$parent.lan.SETTING_SIG_BUTTON_DEFAULT))]),t._v(" "),a("el-button",{attrs:{type:"warning",disabled:0===t.sels.length,size:"mini"},on:{click:t.deleteSelected}},[t._v(t._s(this.$parent.lan.CONTACT_PAB_BDEL))]),t._v(" "),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:t.clearAll}},[t._v(t._s(t.$parent.lan.CLEAR_SIGNATRUE))])],1),t._v(" "),a("el-col",{attrs:{span:12}})],1),t._v(" "),a("el-table",{staticStyle:{width:"100%","max-width":"100%"},attrs:{data:t.listTables,"highlight-current-row":"",width:"100%",size:"mini",border:""},on:{"selection-change":t.f_TableSelsChange}},[a("el-table-column",{attrs:{type:"selection",width:"60"}}),t._v(" "),a("el-table-column",{attrs:{type:"index",label:"No.",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{prop:"caption",label:this.$parent.lan.COMMON_SUBJECT}}),t._v(" "),a("el-table-column",{attrs:{label:this.$parent.lan.SETTING_SIG_DEFAULT_SUBJECT},scopedSlots:t._u([{key:"default",fn:function(e){return["1"==e.row.default?a("i",{staticClass:"el-alert--success el-alert__icon el-icon-success"}):t._e(),t._v(" "),"-1"==e.row.default?a("i",{staticClass:"el-alert--error el-alert__icon el-icon-error"}):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:this.$parent.lan.SETTING_SIG_REFW_DEFAULT_SUBJECT},scopedSlots:t._u([{key:"default",fn:function(e){return["1"==e.row.refw_default?a("i",{staticClass:"el-alert--success el-alert__icon el-icon-success"}):t._e(),t._v(" "),"-1"==e.row.refw_default?a("i",{staticClass:"el-alert--error el-alert__icon el-icon-error"}):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:this.$parent.lan.COMMON_OPRATE},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.updateFormShow(e.$index,e.row)}}},[t._v(t._s(t.$parent.lan.COMMON_BUTTON_ALTER))]),t._v(" "),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){t.deleteRow(e.$index,e.row)}}},[t._v(t._s(t.$parent.lan.COMMON_BUTTON_DELETE))])]}}])})],1),t._v(" "),a("el-col",{staticClass:"toolbar",attrs:{span:24}}),t._v(" "),a("el-dialog",{attrs:{title:this.$parent.lan.SETTING_SIG_BUTTON_DEFAULT,visible:t.defaultSigFormVisible,"close-on-click-modal":!1,"append-to-body":!0},on:{"update:visible":function(e){t.defaultSigFormVisible=e}}},[a("el-form",{ref:"defaultSigForm",attrs:{model:t.defaultSigForm,"label-width":"150px",rules:t.defaultSigFormRules}},[a("el-form-item",{attrs:{label:this.$parent.lan.SETTING_SIG_DEFAULT_MAIL}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:this.$parent.lan.SETTING_SIG_SIG_DEFAULT_MAIL},model:{value:t.defaultSigForm.default,callback:function(e){t.$set(t.defaultSigForm,"default",e)},expression:"defaultSigForm.default"}},t._l(t.listTables,function(t){return a("el-option",{key:t.id,attrs:{label:t.caption,value:t.id}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:this.$parent.lan.SETTING_SIG_DEFAULT_REFW}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:this.$parent.lan.SETTING_SIG_SIG_DEFAULT_MAIL},model:{value:t.defaultSigForm.refw_default,callback:function(e){t.$set(t.defaultSigForm,"refw_default",e)},expression:"defaultSigForm.refw_default"}},t._l(t.listTables,function(t){return a("el-option",{key:t.id,attrs:{label:t.caption,value:t.id}})}),1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(e){t.defaultSigFormVisible=!1}}},[t._v(t._s(this.$parent.lan.COMMON_BUTTON_CANCELL))]),t._v(" "),a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){t.defaultSigSubmit()}}},[t._v(t._s(this.$parent.lan.COMMON_BUTTON_SUBMIT))])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:this.$parent.lan.SETTING_SIG_ADDTITLE,visible:t.createFormVisible,"close-on-click-modal":!1,"append-to-body":!0},on:{"update:visible":function(e){t.createFormVisible=e}}},[a("el-form",{ref:"createForm",attrs:{model:t.createForm,"label-width":"100px",rules:t.createFormRules}},[a("el-form-item",{attrs:{label:this.$parent.lan.SETTING_SIG_SUBJECT,prop:"caption",error:t.created_error}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.createForm.caption,callback:function(e){t.$set(t.createForm,"caption","string"==typeof e?e.trim():e)},expression:"createForm.caption"}})],1),t._v(" "),a("el-form-item",{attrs:{label:this.$parent.lan.SETTING_SIG_CONTENT,prop:"content"}},[t.createFormVisible?a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.createForm.content,expression:"createForm.content"}],staticStyle:{width:"100%",height:"400px"},attrs:{id:"createEditor"},domProps:{value:t.createForm.content},on:{input:function(e){e.target.composing||t.$set(t.createForm,"content",e.target.value)}}}):t._e()])],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(e){t.createFormVisible=!1}}},[t._v(t._s(this.$parent.lan.COMMON_BUTTON_CANCELL))]),t._v(" "),a("el-button",{attrs:{type:"primary",loading:t.createFormLoading},nativeOn:{click:function(e){t.createFormSubmit()}}},[t._v(t._s(this.$parent.lan.COMMON_BUTTON_SUBMIT))])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:this.$parent.lan.SETTING_SIG_UPDATETITLE,visible:t.updateFormVisible,"close-on-click-modal":!1,"append-to-body":!0},on:{"update:visible":function(e){t.updateFormVisible=e}}},[a("el-form",{ref:"updateForm",attrs:{model:t.updateForm,"label-width":"100px",rules:t.updateFormRules}},[a("el-form-item",{attrs:{label:this.$parent.lan.SETTING_SIG_SUBJECT,prop:"caption",error:t.created_error}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.updateForm.caption,callback:function(e){t.$set(t.updateForm,"caption","string"==typeof e?e.trim():e)},expression:"updateForm.caption"}})],1),t._v(" "),a("el-form-item",{attrs:{label:this.$parent.lan.SETTING_SIG_CONTENT,prop:"content"}},[a("textarea",{staticStyle:{width:"100%",height:"400px"},attrs:{id:"updateEditor"}})])],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(e){t.updateFormVisible=!1}}},[t._v(t._s(this.$parent.lan.COMMON_BUTTON_CANCELL))]),t._v(" "),a("el-button",{attrs:{type:"primary",loading:t.updateFormLoading},nativeOn:{click:function(e){t.updateFormSubmit()}}},[t._v(t._s(this.$parent.lan.COMMON_BUTTON_SUBMIT))])],1)],1)],1)],1)},staticRenderFns:[]},i=a("C7Lr")(r.a,n,!1,null,null,null);e.default=i.exports},dsPG:function(t,e,a){"use strict";(function(t){var r=a("aA9S"),n=a.n(r),i=a("R2wu"),o=(a.n(i),a("P9l9"));e.a={data:function(){return{createEditor:"",updateEditor:"",toolbarItems:["source","|","formatblock","fontname","fontsize","|","forecolor","hilitecolor","bold","italic","underline","lineheight","|","justifyleft","justifycenter","justifyright","justifyfull","insertorderedlist","insertunorderedlist","indent","outdent","|","subscript","superscript","link","unlink","image","table","hr","|","undo","redo","preview","fullscreen"],total:0,page:1,page_size:20,listLoading:!1,sels:[],listTables:[],created_error:"",defaultSigFormVisible:!1,defaultSigLoading:!1,defaultSigForm:{default:"",refw_default:""},defaultSigFormRules:{},default_content:"",createFormVisible:!1,createFormLoading:!1,createForm:{caption:"",content:""},createFormRules:{caption:[{required:!0,message:this.$parent.lan.SETTING_SIG_SUBJECT_RULE,trigger:"blur"}],content:[{required:!0,message:this.$parent.lan.SETTING_SIG_CONTENT_RULE,trigger:"blur"}]},updateFormVisible:!1,updateFormLoading:!1,updateForm:{caption:"",content:""},updateFormRules:{caption:[{required:!0,message:this.$parent.lan.SETTING_SIG_SUBJECT_RULE,trigger:"blur"}],content:[{required:!0,message:this.$parent.lan.SETTING_SIG_CONTENT_RULE,trigger:"blur"}]}}},mounted:function(){this.getTables()},methods:{clearAll:function(){var t=this;this.$confirm(this.$parent.lan.CLEAR_SIGNATRUE_DES,this.$parent.lan.COMMON_BUTTON_CONFIRM_NOTICE,{confirmButtonText:this.$parent.lan.COMMON_BUTTON_CONFIRM,cancelButtonText:this.$parent.lan.COMMON_BUTTON_CANCELL,dangerouslyUseHTMLString:!0}).then(function(){Object(o._208)().then(function(e){t.$message({type:"success",message:t.$parent.lan.COMMON_OPRATE_SUCCESS}),t.getTables()}).catch(function(t){console.log(t)})}).catch(function(){})},deleteSelected:function(){var t=this;this.$confirm(this.$parent.lan.BDELETE_SIGNATRUE_DES,this.$parent.lan.COMMON_BUTTON_CONFIRM_NOTICE,{confirmButtonText:this.$parent.lan.COMMON_BUTTON_CONFIRM,cancelButtonText:this.$parent.lan.COMMON_BUTTON_CANCELL,dangerouslyUseHTMLString:!0}).then(function(){Object(o._207)({ids:t.sels.map(function(t){return t.id})}).then(function(e){t.$message({type:"success",message:t.$parent.lan.COMMON_OPRATE_SUCCESS}),t.getTables()}).catch(function(t){console.log(t)})}).catch(function(){})},encodeHtml:function(t){var e=document.createElement("div");null!=e.textContent?e.textContent=t:e.innerText=t;var a=e.innerHTML;return e=null,a},createEditorFn:function(t){var e="zh-CN";"en"==this.$store.getters.getLanguage?e="en":"zh-tw"==this.$store.getters.getLanguage&&(e="zh-TW");var a={items:this.toolbarItems,uploadJson:this.uploadJson,filterMode:!1,resizeType:1,indentChar:"",langType:e,loadStyleMode:!1,autoHeightMode:!1};this.createEditor=KindEditor.create("#createEditor",a),this.createEditor.html(t)},updateEditorFn:function(t){var e="zh-CN";"en"==this.$store.getters.getLanguage?e="en":"zh-tw"==this.$store.getters.getLanguage&&(e="zh-TW");var a={items:this.toolbarItems,uploadJson:this.uploadJson,filterMode:!1,resizeType:1,indentChar:"",langType:e,loadStyleMode:!1,autoHeightMode:!1};this.updateEditor=KindEditor.create("#updateEditor",a),this.updateEditor.html(t)},createContentChange:function(t){this.createForm.content=t},editContentChange:function(t){this.updateForm.content=t},getTables:function(){var t=this;this.listLoading=!0,Object(o._165)().then(function(e){t.total=e.data.total,t.listTables=e.data.results,t.defaultSigForm=e.data.defaults,t.default_content=e.data.default_content,t.listLoading=!1}).catch(function(){t.listLoading=!1})},setDefaultSig:function(){this.defaultSigLoading=!1,this.defaultSigFormVisible=!0,this.defaultSigForm=n()({},this.defaultSigForm)},defaultSigSubmit:function(){var t=this;this.$refs.defaultSigForm.validate(function(e){if(e){t.defaultSigLoading=!0;var a=n()({},t.defaultSigForm);Object(o._163)(a).then(function(e){t.defaultSigLoading=!1,t.$message({message:t.$parent.lan.COMMON_SET_SUCCESS,type:"success"}),t.$refs.defaultSigForm.resetFields(),t.defaultSigFormVisible=!1,t.getTables()}).catch(function(t){console.log(t)})}})},createFormShow:function(){var e=this,a=this.createForm;null!=this.default_content&&(a.content=this.htmlDecodeByRegExp(this.default_content)),this.createForm=n()({},a),this.createFormLoading=!1,this.created_error="",this.createFormVisible=!0,t("#createEditor").val(this.createForm.content),this.$nextTick(function(){e.createEditor&&(e.createForm.content=e.createEditor.html(),e.createEditor.remove("#createEditor")),e.createEditorFn(e.createForm.content)})},createFormSubmit:function(){var t=this;this.createForm.content=this.createEditor.html(),this.createForm.content=this.encodeHtml(this.createForm.content),this.created_error="",this.$refs.createForm.validate(function(e){if(e){t.createFormLoading=!0;var a=n()({},t.createForm);Object(o._162)(a).then(function(e){t.$message({message:t.$parent.lan.COMMON_ADD_SUCCESS,type:"success"}),t.$refs.createForm.resetFields(),t.createFormVisible=!1,t.createFormLoading=!1,t.getTables()}).catch(function(e){t.createFormLoading=!1;var a="";e.limited_error_message&&(a=e.limited_error_message),e.caption&&(t.created_error=e.caption[0]),a&&a.length>0&&t.$message({message:a,type:"error"})})}})},htmlEncodeByRegExp:function(t){return 0==t.length?"":t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/ /g,"&nbsp;").replace(/\'/g,"&#39;").replace(/\"/g,"&quot;")},htmlDecodeByRegExp:function(t){return 0==t.length?"":t.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&nbsp;/g," ").replace(/&#39;/g,"'").replace(/&quot;/g,'"')},updateFormShow:function(t,e){var a=this;this.listLoading=!0,Object(o._166)(e.id).then(function(t){a.listLoading=!1;var e=n()({},t.data);e.content=a.htmlDecodeByRegExp(e.content),a.updateForm=e,a.created_error="",a.updateFormVisible=!0,a.updateFormLoading=!1,a.$nextTick(function(){a.updateEditor&&KindEditor.remove("#updateEditor"),a.updateEditorFn(a.updateForm.content)})}).catch(function(){a.listLoading=!1})},updateFormSubmit:function(){var t=this;this.updateForm.content=this.updateEditor.html(),this.updateForm.content=this.encodeHtml(this.updateForm.content),this.created_error="",this.$refs.updateForm.validate(function(e){if(e){t.updateFormLoading=!0;var a=n()({},t.updateForm);Object(o._167)(a.id,a).then(function(e){t.$refs.updateForm.resetFields(),t.updateFormLoading=!1,t.updateFormVisible=!1,t.$message({message:t.$parent.lan.COMMON_ALTER_SUCCESS,type:"success"}),t.getTables()}).catch(function(e){t.updateFormLoading=!1,e.caption&&(t.created_error=e.caption[0])})}})},deleteRow:function(t,e){var a=this,r=this;this.$confirm(this.$parent.lan.COMMON_BUTTON_DELETE_SUBMIT,this.$parent.lan.COMMON_BUTTON_CONFIRM_NOTICE,{type:"warning"}).then(function(){Object(o._164)(e.id).then(function(t){r.$message({message:a.$parent.lan.COMMON_DELETE_SUCCESS,type:"success"}),a.getTables()}).catch(function(t){console.log(t)})})},f_TableSelsChange:function(t){this.sels=t}},computed:{uploadJson:function(){return this.$store.state.uploadJson}}}}).call(e,a("L7Pj"))}});
//# sourceMappingURL=24.fdf146e1556569b15a6c.js.map